{% extends "base.html" %}
{% block content %}
<h2>Kleiderpfand</h2>
<form method="post" class="inline-form">
  <select name="user_id" required>
    {% for u in users %}<option value="{{ u.id }}">{{ u.username }}</option>{% endfor %}
  </select>
  <input name="item" placeholder="Artikel (z.B. Schürze)" required>
  <input name="size" placeholder="Größe">
  <input name="amount" type="number" step="0.01" placeholder="Pfand €">
  <input name="date" type="date" required>
  <label><input type="checkbox" name="returned"> zurückgegeben</label>
  <input name="notes" placeholder="Notizen">
  <button>Hinzufügen</button>
</form>
<table>
  <tr><th>User</th><th>Artikel</th><th>Größe</th><th>Pfand</th><th>Datum</th><th>Status</th><th>Notizen</th><th></th></tr>
  {% for d in data %}
  <tr>
    <td>{{ d.user.username }}</td>
    <td>{{ d.item }}</td>
    <td>{{ d.size }}</td>
    <td>{{ '%.2f'|format(d.amount) }}</td>
    <td>{{ d.date.strftime("%Y-%m-%d") }}</td>
    <td>{{ 'zurück' if d.returned else 'ausgegeben' }}</td>
    <td>{{ d.notes }}</td>
    <td class="actions">
      <form method="post" action="{{ url_for('deposit_toggle', id=d.id) }}"><button>Toggle</button></form>
      <form method="post" action="{{ url_for('deposit_delete', id=d.id) }}"><button class="danger">Löschen</button></form>
    </td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
